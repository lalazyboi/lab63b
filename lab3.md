# การทดลองที่ ๓ เรื่อง การเขียนโปรแกรมเอ้าพุทสัญญาณดิจิทัล

## วัตถุประสงค์
1. เพื่อให้นักศึกษามีความรู้เกี่ยวกับการเขียนโปรแกรมลงไมโครคอนโทรเลอร์
2. เพื่อศึกษาการเขียนโปรแกรมเอ้าพุทสัญญาณดิจิทัล

## อุปกรณ์ที่ใช้
1. ไมโครคอนโทรลเลอร์ (ESP-01)
2. อุปกรณ์ในการเขียนโปรแกรม เช่น PC,Laptop
3. USB to serial port
4. อะแดปเตอร์
5. รีเลย์
6. LED

## ศึกษาข้อมูลเบื้องต้น
* [วิธีการทดลองตอนที่ 1](https://www.youtube.com/watch?v=CCnN1WJsXQY&ab_channel=TANI-IOT)
* [วิธีการทดลองตอนที่ 2](https://www.youtube.com/watch?v=6JnhaUILGuw&ab_channel=TANI-IOT)
* [Source code](https://github.com/choompol-boonmee/lab63b/tree/master/examples)
* [platformIO](https://platformio.org/)

## วิธีทำการทดลอง
1. เสียบไมโครคอนโทรเลอร์ลง USB to serial port ที่่ต่อกับคอมพิวเตอร์แล้วต่อ LED กับ port 0 
![2021-03-25 (1)](https://user-images.githubusercontent.com/78695932/112357662-5165a900-8d02-11eb-91be-752b2d3396e8.png)

2. เสียบไมโครคอนโทรเลอร์กับอะแดปเตอร์
![2021-03-25 (2)](https://user-images.githubusercontent.com/78695932/112357622-49a60480-8d02-11eb-995d-5d9fe48d8d03.png)

3. พิมพ์คำสั่ง `pwd` จากนั้นพิมพ์ `vi src/main.cpp`
![2021-03-25 (3)](https://user-images.githubusercontent.com/78695932/112357604-46127d80-8d02-11eb-8d65-da4d0f0f2518.png)

4. upload โปรแกรมโดยพิมพ์ `pio run -t upload`
![2021-03-25 (4)](https://user-images.githubusercontent.com/78695932/112357582-414dc980-8d02-11eb-9d37-ecb30a6d941f.png)

5. กดปุ่ม download แล้วกด reset ที่ไมโครคอนโทรเลอร์
![2021-03-25 (5)](https://user-images.githubusercontent.com/78695932/112357563-3bf07f00-8d02-11eb-8584-6498f172a6fb.png)

6. พิมพ์ `pio device monitor` เพื่อให้โปรแกรมทำงาน
![2021-03-25](https://user-images.githubusercontent.com/78695932/112357501-2b400900-8d02-11eb-905d-20b86b45751c.png)

7. เสียบไมโครคอนโทรเลอร์กับรีเลย์แล้วเสียบ USB กับขั้วชาร์ตหรือ power bank 
![2021-03-25 (7)](https://user-images.githubusercontent.com/78695932/112357435-1d8a8380-8d02-11eb-8e78-11518d52e3a5.png)


## การบันทึกผลการทดลอง
    ให้สังเกตผลการทดลองแล้วเขียนอธิบาย เช่น เมื่อรันโปรแกรมจะเห็นว่าแสดงผลเป็น ON-OFF สลับกันไปโดย LED จะสว่างและดับสลับกัน และเมื่อเสียบกับรีเลย์เราจะเห็นไฟของรีเลย์สว่างและดับสลับกันและได้ยินเสียงหน้าสัมผัสของรีเลย์กระทบไปมา

## อภิปรายผลการทดลอง
    ในการทดลองนี้เราสามารถนำไปประยุกต์ใช้หรือคิดต่อยอดอะไรได้อีกบ้าง เช่น เมื่อรันโปรแกรมจะเห็นว่าแสดงผลเป็น ON-OFF สลับกันไปโดย LED จะสว่างเมื่อ cnt เป็นเลขคี่และจะเป็น ON ส่วนเลขคู่ LED จะดับเมื่อ cnt เป็นเลขคู่และเป็น OFF ส่วนเมื่อเสียบกับรีเลย์ไมโครคอนโทรเลอร์จะทำการควบคุมทำงานของรีเลย์ตามที่ได้โปรแกรมไว้ ซึ่งจากการทดลองนี้เราสามารถนำไปควบคุมการทำงานของอุปกรณ์ไฟฟ้าต่างๆ ได้
## คำถามหลังการทดลอง
1. จากโปรแกรม LED จะเปล่งแสงเมื่อใด
     * เมื่อเอ้าพุทเป็นเลขคี่
2. สามารถนำการทดลองไปใช้อะไรได้บ้าง
     * ควบคุมการทำงานของอุปกรณ์ไฟในบ้าน
